<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Test046.html</title>

    <!-- 테스트 -->
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <style type="text/css">
      
    </style>

    <!-- <script type="text/javascript" src="js/actionMenu.js"></script> -->
    <script type="text/javascript">
        //----------------------------------------------
        // 자바스크립트 코드 작성
        //----------------------------------------------

        window.onload = function () {
            console.log(">>> window.onload~!!!");
            document.querySelector("input[type=button]").onclick = protoTest;

            // 자바스크립트 배역 객체 구성
            var boardArray = new Array();

            // 사용자 정의 객체 구성(-> 생성자 함수 정의)
            function Board(uName, uContent) {
                this.userName = uName;
                this.content = uContent;
                this.writeDay = new Date();
            }

            // check~!!!
            // 프로토타입(prototype) 구성을 통해
            // 사용자 정의 객체의 함수(기능, 동작, 행위) 정의
            // Board.prototype.userLocalString = 기능;
            // Board.prototype.userLocalString = 함수;
            // Board.prototype.userLocalString = function() { ... };
            Board.prototype.userLocalString = function() {
                return this.writeDay.getFullYear() + "-"
                + (this.writeDay.getMonth()+1) + "-"
                + this.writeDay.getDate() + " "
                + this.writeDay.getHours() + ":"
                + this.writeDay.getMinutes() + ":"
                + this.writeDay.getSeconds();
                // 시 -> getHours()
                // 분 -> getMinutes()
                // 초 -> getSeconds()

            };

            // 글쓰기 버튼이 클릭되었을때 
            function protoTest() {
                console.log(">>> protoTest");

                var uName = document.getElementById("uName").value;
                var uContent = document.getElementById("uContent").value;

                var len = boardArray.length;
                // 확인
                console.log("배열 길이 : " + len);
                //==>> 배열 길이 : 0 (<- 최초 요청 시)
                
                // 사용자 정의 객체 생성(-> 생성자 함수 호출)
                boardArray[len] = new Board(uName, uContent);
                // 확인
                console.log("배열 길이 : " + len);
                //==>> 배열 길이 : 1...2...3 (<- 작성이 이루어질 때 마다...)

                // 내용 출력 전용 함수 호출
                // print(0);



                print(len);
            }

            // 내용 출력 전용 함수 정의
            function print(idx) {
                var strTemp = boardArray[idx].content;
                console.log(strTemp);
                //==>> 안녕하세요, 반갑습니다.

                var tableObj = document.getElementById("bbsTable");
                var tBodyObj = tableObj.getElementsByTagName('tbody');

                var trNode = document.createElement("tr");
                trNode.appendChild(createTdNode(idx+1));     //-- 번호
                trNode.appendChild(createTdNode(boardArray[idx].userName));//--이름
                trNode.appendChild(createTdNode(boardArray[idx].content));//-- 내용
                trNode.appendChild(createTdNode(boardArray[idx].userLocalString()));//--작성일
                tableObj.appendChild(trNode);
            }

            // td 노드 생성 및 반환 함수 정의
            function createTdNode(txt) {
                var txtNode = document.createTextNode(txt);
                var tdNode = document.createElement("td");
                tdNode.appendChild(txtNode);
                return tdNode;
            }


        }//window.onload

        //------------[end]----------------------------------
    </script>
    <noscript>
        자바스크립트가 사용되지 못할 경우 기능하는(표현되는) 영역
    </noscript>
</head>

<!-- 이벤트 등록 방법 ① -->
<!-- <body> -->
<!-- <body onload="windowOnload();"> -->

<body>
 
 <div>
    <p>사용자 정의 객체 및 프로토타입 활용</p>
    <div>
        <form>
            <!--  -->
            <table class="table">
                <tr>
                    <th>작성자</th>
                    <td>
                        <input type="text" id="uName" class="txt" style="width: 150px;">
                    </td>
                </tr>
                <tr>
                    <th>내용</th>
                    <td>
                        <input type="text" id="uContent" class="txt" style="width: 600px;">
                    </td>
                </tr>
            </table>
            <br>
            <input type="button" value="글쓰기" class="btn control" style="width: 700px;">
            <br><br>

            <!-- 내용을 리스트 형식으로 볼 수 있도록 구성하는 레이아웃 테이블 -->
        </form>
        <table class="table" border="1" id="bbsTable">
            <tr>
                <th style="width: 10%;">번호</th>
                <th style="width: 15%;">작성자</th>
                <th style="width: 55%;">내용</th>
                <th style="width: 20%;">작성일</th>
            </tr>
        </table>
    </div>
 </div>




</body>

</html>